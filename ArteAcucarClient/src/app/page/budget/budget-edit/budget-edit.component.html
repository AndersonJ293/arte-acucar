<div class="container">
  <section>
    <header>
      <h3>Adicionar Orçamento</h3>
      <button class="fechar-modal">
        <i class="fa fa-times"></i>
      </button>
    </header>
    <form>
      <div class="line">
        <div class="groupName">
          <label for="name">Nome </label>
          <input type="text" id="name" name="name" required />
        </div>
      </div>
      <div class="line">
        <div class="groupAdditional">
          <label for="deliveryDate">Data entrega</label>
          <input
            type="datetime-local"
            id="deliveryDate"
            name="deliveryDate"
            required
          />
        </div>
        <div class="groupAdditional">
          <label for="budgetDate">Data orçamento</label>
          <input
            type="datetime-local"
            id="budgetDate"
            name="budgetDate"
            required
          />
        </div>
      </div>

      <div class="line">
        <div class="groupProfitPercentage">
          <label for="nameKid">Tema</label>
          <input
            type="text"
            class="custom-select"
            name="nameKid"
            id="nameKid"
            required
          />
        </div>
        <div class="groupAdditional">
          <label for="phone">Telefone</label>
          <input type="tel" id="phone" name="phone" required />
        </div>
      </div>
      <div class="line">
        <div class="groupProfitPercentage">
          <label for="qtde">Nome da criança</label>
          <input
            type="text"
            class="custom-select"
            name="theme"
            id="theme"
            required
          />
        </div>
        <div class="groupAdditional">
          <label for="age">Idade</label>
          <input type="number" id="age" name="age" required />
        </div>
      </div>
      <div class="commoditiesArea">
        <div class="header">
          <h3>Adicionar produtos</h3>
          <button class="btnSave" (click)="openModal()">+</button>
        </div>
        <div id="drop-area" *ngIf="selectedItems.length > 0">
          <ng-container *ngFor="let selectedItem of selectedItems">
            <div class="selectedItem">
              <h3>{{ selectedItem.name }}</h3>
              <p>Custo: {{ selectedItem.custo }}</p>
              <p>Lucro: {{ selectedItem.lucro }}</p>
              <p>Valor de venda: {{ selectedItem.venda }}</p>
              <input
                type="number"
                [(ngModel)]="selectedItem.usedQuantity"
                placeholder="Quantidade Usada"
              />
              <p>
                Valor Usado:
                {{
                  selectedItem.usedQuantity *
                    (selectedItem.value / selectedItem.quantity)
                }}
              </p>
            </div>
          </ng-container>
        </div>
      </div>

      <div class="line">
        <div class="groupCostTotal">
          <label for="costTotal">Custo Insumos</label>
          {{ 54 | currency : "BRL" }}
        </div>
        <div class="groupProfitPercentage">
          <label for="profit">Lucro</label>
          {{ 54 | currency : "BRL" }}
        </div>
      </div>

      <div class="line">
        <div class="groupProductionCost">
          <label for="productionCost">Custo Total</label>
          {{ 54 | currency : "BRL" }}
        </div>
        <div class="groupSalary">
          <label for="salary">Salário</label>
          <p>{{ 54 | currency : "BRL" }}</p>
        </div>
      </div>

      <div class="line">
        <div></div>
        <div class="groupSellingPrice">
          <label for="sellingPrice">Preço Total</label>
          {{ 54 | currency : "BRL" }}
        </div>
      </div>

      <div class="buttons">
        <button type="submit" class="btnSave">Salvar</button>
        <button routerLink="/painel/orcamento" type="reset" class="btnCancel">
          Cancelar
        </button>
      </div>
    </form>
  </section>
</div>
<app-budget-modal
  (save)="handleSave($event)"
  [items]="items"
  *ngIf="open"
  [selectedItems]="selectedItems"
></app-budget-modal>
